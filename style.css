/* ========== Tokens base (corrigidos) ========== */
:root{
  /* Primitives */
  --color-white:#fff; --color-black:#000;
  --color-cream-50:#fcfcf9; --color-cream-100:#fffffd;

  --color-gray-200:#f5f5f5; --color-gray-300:#a7a9a9; --color-gray-400:#777c7c;
  --color-slate-500:#626c71; --color-slate-900:#13343b;
  --color-brown-600:#5e5240; --color-charcoal-700:#1f2121; --color-charcoal-800:#262828;

  /* Marca */
  --color-teal-300:#ed5968; --color-teal-400:#19969c; --color-teal-500:#ff5b6b;
  --color-teal-600:#e65161; --color-teal-700:#cc4752;

  /* Acentos */
  --color-red-400:#ff5459; --color-red-500:#c0152f;
  --color-orange-400:#d4ccca; --color-orange-500:#a84b2f;

  /* RGB helpers */
  --color-brown-600-rgb:94,82,64; --color-teal-500-rgb:18,142,147;
  --color-slate-900-rgb:19,52,59; --color-slate-500-rgb:98,108,113;
  --color-red-500-rgb:192,21,47; --color-red-400-rgb:255,84,89;
  --color-orange-500-rgb:168,75,47; --color-orange-400-rgb:230,129,97;

  /* Background accents (Light) */
  --color-bg-1: rgba(22,142,147,.10);
  --color-bg-2: rgba(245,158,11,.08);
  --color-bg-3: rgba(34,197,94,.08);
  --color-bg-4: rgba(239,68,68,.08);
  --color-bg-5: rgba(147,51,234,.08);
  --color-bg-6: rgba(249,115,22,.08);
  --color-bg-7: rgba(236,72,153,.08);
  --color-bg-8: rgba(6,182,212,.08);

  /* Semantic (Light) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);

  --color-primary:#ff5b6b; --color-primary-hover:#e65161; --color-primary-active:#cc4752;

  --color-secondary: rgba(var(--color-brown-600-rgb), .12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), .2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), .25);
  --color-border: rgba(var(--color-brown-600-rgb), .2);

  --color-btn-primary-text:#fff;
  --color-card-border: rgba(var(--color-brown-600-rgb), .12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), .12);

  --color-error: var(--color-red-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);

  /* Success (única definição + RGB) */
  --color-success:#22c55e;
  --color-success-rgb:34,197,94;

  /* Focus */
  --color-focus-ring: rgba(255,91,107,.40);
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);

  --status-bg-opacity:.15; --status-border-opacity:.25;

  --select-caret-light:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* Typography */
  --font-family-base:"FKGroteskNeue","Geist","Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  --font-family-mono:"Berkeley Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;

  --font-size-xs:11px; --font-size-sm:12px; --font-size-base:14px; --font-size-md:14px;
  --font-size-lg:16px; --font-size-xl:18px; --font-size-2xl:20px; --font-size-3xl:24px; --font-size-4xl:30px;

  --font-weight-normal:400; --font-weight-medium:500; --font-weight-semibold:550; --font-weight-bold:600;
  --line-height-tight:1.2; --line-height-normal:1.5; --letter-spacing-tight:-0.01em;

  /* Spacing */
  --space-0:0; --space-1:1px; --space-2:2px; --space-4:4px; --space-6:6px; --space-8:8px;
  --space-10:10px; --space-12:12px; --space-16:16px; --space-20:20px; --space-24:24px; --space-32:32px;

  /* Radius */
  --radius-sm:6px; --radius-base:8px; --radius-md:10px; --radius-lg:12px; --radius-full:9999px;

  /* Shadows */
  --shadow-xs:0 1px 2px rgba(0,0,0,.02);
  --shadow-sm:0 1px 3px rgba(0,0,0,.04), 0 1px 2px rgba(0,0,0,.02);
  --shadow-md:0 4px 6px -1px rgba(0,0,0,.04), 0 2px 4px -1px rgba(0,0,0,.02);
  --shadow-lg:0 10px 15px -3px rgba(0,0,0,.04), 0 4px 6px -2px rgba(0,0,0,.02);

  /* Breakpoints */
  --container-sm:640px; --container-md:768px; --container-lg:1024px; --container-xl:1280px;
}

/* Dark (prefers) */
@media (prefers-color-scheme: dark){
  :root{
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text:#f5f5f5; --color-text-secondary: rgba(245,245,245,.7);

    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active:#0a2f33;

    --color-secondary: rgba(119,124,124,.15);
    --color-secondary-hover: rgba(119,124,124,.25);
    --color-secondary-active: rgba(119,124,124,.3);
    --color-border: rgba(119,124,124,.3);

    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);

    --color-focus-ring: rgba(50,184,198,.4);
    --color-btn-primary-text: var(--color-slate-900);

    --color-card-border: rgba(119,124,124,.2);
    --color-card-border-inner: rgba(119,124,124,.15);
  }
}

/* ========== Base ========= */
html{ font-size:var(--font-size-base); font-family:var(--font-family-base); line-height:var(--line-height-normal);
  color:var(--color-text); background:var(--color-background); -webkit-font-smoothing:antialiased; box-sizing:border-box;}
*,*::before,*::after{ box-sizing:inherit;}
body{ margin:0; padding:0; }

h1,h2,h3,h4,h5,h6{ margin:0; font-weight:var(--font-weight-semibold); line-height:var(--line-height-tight);
  color:var(--color-text); letter-spacing:var(--letter-spacing-tight);}
h1{ font-size:var(--font-size-4xl);} h2{ font-size:var(--font-size-3xl);} h3{ font-size:var(--font-size-2xl);}
h4{ font-size:var(--font-size-xl);} h5{ font-size:var(--font-size-lg);} h6{ font-size:var(--font-size-md);}
p{ margin:0 0 var(--space-16) 0; }
a{ color:var(--color-primary); text-decoration:none; transition:color var(--duration-fast) var(--ease-standard); }
a:hover{ color:var(--color-primary-hover); }

code,pre{ font-family:var(--font-family-mono); font-size:calc(var(--font-size-base)*.95);
  background:var(--color-secondary); border-radius:var(--radius-sm);}
code{ padding:var(--space-1) var(--space-4);}
pre{ padding:var(--space-16); margin:var(--space-16) 0; overflow:auto; border:1px solid var(--color-border); }
pre code{ background:none; padding:0; }

/* ========== Botões ========= */
.btn{ display:inline-flex; align-items:center; justify-content:center; padding:var(--space-8) var(--space-16);
  border-radius:var(--radius-base); font-size:var(--font-size-base); font-weight:500; line-height:1.5; cursor:pointer;
  transition:all var(--duration-normal) var(--ease-standard); border:none; position:relative;}
.btn:focus-visible{ outline:none; box-shadow:var(--focus-ring);}
.btn--primary{ background:var(--color-primary); color:var(--color-btn-primary-text);}
.btn--primary:hover{ background:var(--color-primary-hover);}
.btn--primary:active{ background:var(--color-primary-active);}
.btn--secondary{ background:var(--color-secondary); color:var(--color-text);}
.btn--secondary:hover{ background:var(--color-secondary-hover);}
.btn--secondary:active{ background:var(--color-secondary-active);}
.btn--outline{ background:transparent; border:1px solid var(--color-border); color:var(--color-text);}
.btn--outline:hover{ background:var(--color-secondary);}
.btn--sm{ padding:var(--space-4) var(--space-12); font-size:var(--font-size-sm); border-radius:var(--radius-sm);}
.btn--lg{ padding:var(--space-10) var(--space-20); font-size:var(--font-size-lg); border-radius:var(--radius-md);}
.btn--full-width{ width:100%; }
.btn:disabled{ opacity:.5; cursor:not-allowed; }

/* ========== Form ========= */
.form-control{ display:block; width:100%; padding:var(--space-8) var(--space-12); font-size:var(--font-size-md);
  line-height:1.5; color:var(--color-text); background:var(--color-surface); border:1px solid var(--color-border);
  border-radius:var(--radius-base); transition:border-color var(--duration-fast) var(--ease-standard), box-shadow var(--duration-fast) var(--ease-standard);}
select.form-control{ -webkit-appearance:none; appearance:none; background-image:var(--select-caret-light);
  background-repeat:no-repeat; background-position:right var(--space-12) center; background-size:16px; padding-right:var(--space-32);}
@media (prefers-color-scheme: dark){ select.form-control{ background-image:var(--select-caret-dark);} }
.form-control:focus{ border-color:grey; }
.form-label{ display:block; margin-bottom:var(--space-8); font-weight:var(--font-weight-medium); font-size:var(--font-size-sm); }
.form-group{ margin-bottom:var(--space-16); }

/* ========== Cards / Status ========= */
.card{ background:var(--color-surface); border-radius:var(--radius-lg); border:1px solid var(--color-card-border);
  box-shadow:var(--shadow-sm); overflow:hidden; transition:box-shadow var(--duration-normal) var(--ease-standard); }
.card:hover{ box-shadow:var(--shadow-md);}
.card__header,.card__footer{ padding:var(--space-16); border-bottom:1px solid var(--color-card-border-inner);}
.card__body{ padding:var(--space-16); }

.status{ display:inline-flex; align-items:center; padding:var(--space-6) var(--space-12); border-radius:var(--radius-full);
  font-weight:var(--font-weight-medium); font-size:var(--font-size-sm);}
.status--success{ background:rgba(var(--color-success-rgb), var(--status-bg-opacity)); color:var(--color-success);
  border:1px solid rgba(var(--color-success-rgb), var(--status-border-opacity));}
.status--error{ background:rgba(var(--color-red-500-rgb), var(--status-bg-opacity)); color:var(--color-error);
  border:1px solid rgba(var(--color-red-500-rgb), var(--status-border-opacity));}
.status--warning{ background:rgba(var(--color-orange-500-rgb), var(--status-bg-opacity)); color:var(--color-warning);
  border:1px solid rgba(var(--color-orange-500-rgb), var(--status-border-opacity));}
.status--info{ background:rgba(var(--color-slate-500-rgb), var(--status-bg-opacity)); color:var(--color-info);
  border:1px solid rgba(var(--color-slate-500-rgb), var(--status-border-opacity));}

/* ========== Container ========= */
.container{ width:min(1200px, 100% - 2rem); margin-inline:auto; }

/* ========== Header ========= */
.header{ background:#8b2f85; border-bottom-color:rgba(255,255,255,.15); box-shadow:var(--shadow-sm); position:sticky; top:0; z-index:100; }
.header-content{ display:flex; align-items:center; justify-content:space-between; padding:var(--space-16) 0;}
.logo-section{ display:flex; align-items:center; gap:16px;}
.brand-logo{ width:170px; height:auto; object-fit:contain; transform:translateY(1px); margin-right:20px;}
.header h1{ font-size:var(--font-size-2xl); color:#fff; margin:0;}
.auto-refresh{ display:flex; align-items:center; gap:var(--space-8); color:rgba(255,255,255,.92); font-size:var(--font-size-sm); }

/* ========== Layout mobile-first ========= */
.main-content{ display:flex; min-height:calc(100vh - 80px); }
.main-content .container{
  display:grid; gap:24px; grid-template-columns:1fr; width:100%; max-width:none; padding:24px;
}
@media (min-width:62rem){ .main-content .container{ grid-template-columns:240px 1fr; } } /* ~992px */

/* Sidebar */
.sidebar{ background:var(--color-surface); border-radius:var(--radius-lg); border:1px solid var(--color-card-border);
  height:fit-content; padding:var(--space-20); position:sticky; top:16px; align-self:start; }
.nav{ display:flex; flex-direction:column; gap:var(--space-8);}
.nav-item{ display:flex; align-items:center; gap:var(--space-12); padding:var(--space-12) var(--space-16);
  border-radius:var(--radius-base); color:var(--color-text-secondary); text-decoration:none; transition:all var(--duration-fast) var(--ease-standard); font-weight:var(--font-weight-medium);}
.nav-item:hover{ background:#bd424f; color:#fff;}
.nav-item--active{ background:var(--color-primary); color:#fff; font-weight:var(--font-weight-semibold);}

/* Dashboard content */
.dashboard-content{ display:flex; flex-direction:column; gap:var(--space-24); }

/* Stats grid */
.stats-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:var(--space-16); }
.stat-card{ background:var(--color-surface); border:1px solid var(--color-card-border); border-radius:var(--radius-lg);
  padding:var(--space-20); display:flex; align-items:center; gap:var(--space-16); box-shadow:var(--shadow-sm);
  transition:transform var(--duration-fast) var(--ease-standard);}
.stat-card:hover{ transform:translateY(-2px); box-shadow:var(--shadow-md);}
.stat-icon{ width:50px; height:50px; border-radius:var(--radius-full); display:flex; align-items:center; justify-content:center; font-size:var(--font-size-xl);}
.stat-icon--success{ background:var(--color-bg-3); color:var(--color-success);}
.stat-icon--error{ background:var(--color-bg-4); color:var(--color-error);}
.stat-icon--info{ background:var(--color-bg-1); color:var(--color-info);}
.stat-icon--warning{ background:var(--color-bg-2); color:var(--color-warning);}
.stat-content h3{ font-size:var(--font-size-3xl); font-weight:var(--font-weight-bold); color:var(--color-text); margin:0;}
.stat-content p{ font-size:var(--font-size-sm); color:var(--color-text-secondary); margin:var(--space-4) 0 0 0; }

/* Histórico e filtros */
.history-chart-section{ width:100%; }
.period-filters{ display:flex; gap:var(--space-4); flex-wrap:wrap; }
.period-btn{ padding:var(--space-6) var(--space-12); border:1px solid var(--color-border); background:var(--color-surface);
  color:var(--color-text-secondary); border-radius:var(--radius-sm); cursor:pointer; transition:all var(--duration-fast) var(--ease-standard);
  font-size:var(--font-size-sm); font-weight:var(--font-weight-medium);}
.period-btn--active{ background:var(--color-primary); color:#fff; border-color:var(--color-primary); }

/* Conteúdo: gráficos + histórico */
.content-grid{ display:grid; grid-template-columns:1fr; gap:var(--space-24);}
@media (min-width:62rem){ .content-grid{ grid-template-columns:1fr 1fr; } }
.chart-section,.history-section{ display:flex; flex-direction:column; }

/* Filtros */
.chart-filters,.history-actions{ display:flex; gap:var(--space-8); flex-wrap:wrap; align-items:center; }
.chart-filters .form-control{ min-width:150px; font-size:var(--font-size-sm);}
.history-actions .form-control{ font-size:var(--font-size-sm); }

/* Containers dos charts (critico p/ Chart.js) */
.chart-container{ position:relative; width:100%; height:clamp(240px, 40vh, 360px); } /* usar maintainAspectRatio:false no JS */ /* [11] */

/* Tabela */
.execution-table{ overflow-x:auto; }
.table{ width:100%; border-collapse:collapse; font-size:var(--font-size-sm); }
.table th,.table td{ padding:var(--space-12); text-align:left; border-bottom:1px solid var(--color-border); white-space:nowrap; }
.table th{ background:var(--color-secondary); font-weight:var(--font-weight-semibold); color:var(--color-text); }
.table tr:hover{ background:var(--color-secondary); }

/* Paginação */
.pagination{ display:flex; justify-content:center; align-items:center; gap:var(--space-8); margin-top:var(--space-16); }
.pagination button{ padding:var(--space-6) var(--space-12); border:1px solid var(--color-border); background:var(--color-surface);
  color:var(--color-text); border-radius:var(--radius-sm); cursor:pointer; transition:all var(--duration-fast) var(--ease-standard);}
.pagination button.active{ background:var(--color-primary); color:#fff; border-color:var(--color-primary); }
.pagination button:disabled{ opacity:.5; cursor:not-allowed; }

/* Modal (resumido) */
.modal{ position:fixed; inset:0; z-index:1000; display:flex; align-items:center; justify-content:center; }
.modal.hidden{ display:none; }
.modal-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.5); }
.modal-content{ background:var(--color-surface); border-radius:var(--radius-lg); border:1px solid var(--color-card-border);
  box-shadow:var(--shadow-lg); width:90%; max-width:800px; max-height:90vh; overflow:hidden; position:relative; z-index:1001; }
.modal-header{ display:flex; align-items:center; justify-content:space-between; padding:var(--space-20); border-bottom:1px solid var(--color-card-border-inner); }
.modal-header h2{ margin:0; font-size:var(--font-size-xl); }
.modal-body{ max-height:calc(90vh - 100px); overflow-y:auto; }
.modal-tabs{ display:flex; border-bottom:1px solid var(--color-card-border-inner); }
.tab-button{ padding:var(--space-12) var(--space-20); background:none; border:none; color:var(--color-text-secondary); cursor:pointer;
  font-size:var(--font-size-sm); font-weight:var(--font-weight-medium); border-bottom:2px solid transparent; transition:all var(--duration-fast) var(--ease-standard);}
.tab-button--active{ color:var(--color-primary); border-bottom-color:var(--color-primary); }
.tab-panel{ display:none; padding:var(--space-20); }
.tab-panel--active{ display:block; }

/* Logs/Artifacts (resumido) */
.logs-container{ background:var(--color-background); border:1px solid var(--color-border); border-radius:var(--radius-base); max-height:400px; overflow-y:auto; }

/* Loading overlay */
.loading-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.7); display:flex; align-items:center; justify-content:center; z-index:2000; }
.loading-overlay.hidden{ display:none; }
.spinner{ width:50px; height:50px; border:4px solid var(--color-secondary); border-top:4px solid var(--color-primary); border-radius:50%; animation:spin 1s linear infinite; }
@keyframes spin{ to{ transform:rotate(360deg);} }

/* ========== Media extras ========= */
@media (max-width:1024px){
  .main-content .container{ grid-template-columns:1fr; gap:16px; }
  .content-grid{ grid-template-columns:1fr; }
  .stats-grid{ grid-template-columns:repeat(2,1fr); }
}
@media (max-width:768px){
  .header-content{ flex-direction:column; gap:16px; }
  .stats-grid{ grid-template-columns:1fr; }
  .chart-filters,.history-actions{ flex-direction:column; }
}

/* ========== Status Pipeline (bloco solicitado) ========= */
.btn-pipeline{
  min-width:190px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  white-space:nowrap;
}
.btn-pipeline .btn-pipeline__content{
  display:inline-grid;
  grid-auto-flow:column;
  align-items:center;
  column-gap:10px;
}

/* Mostra o slot do spinner apenas no loading */
.btn-pipeline.btn--loading .btn-spinner-slot{ visibility:visible; }

/* Conteúdo textual (ícone + label) */
.btn-pipeline__content{
  display:inline-flex;
  align-items:center;
  gap:10px;
}

/* Loading: bloqueia clique e mantém opacidade */
.btn-pipeline.btn--loading{
  opacity:.9;
  pointer-events:none;
}

/* Spinner interno sem “pular” layout */
.btn-pipeline.btn--loading::after{
  content:'';
  display:block;
  width:16px; height:16px;
  border:2px solid rgba(255,255,255,.6);
  border-top-color:#fff;
  border-radius:50%;
  animation:spin .7s linear infinite;
}

/* Slot de spinner preparado (fica oculto por padrão) */
.btn-pipeline .btn-spinner-slot{
  width:16px; height:16px;
  display:inline-block;
  visibility:hidden;
}
.btn-pipeline .btn-spinner-slot::after{
  content:'';
  display:inline-block;
  width:16px; height:16px;
  border:2px solid rgba(255,255,255,.6);
  border-top-color:#fff;
  border-radius:50%;
  animation:spin .7s linear infinite;
  vertical-align:middle;
  transform:translateY(-2px);
}

/* Variantes por status */
.btn-pipeline.is-in-progress{ background:var(--color-primary-hover); }
.btn-pipeline.is-success{ background:var(--color-success); }
.btn-pipeline.is-failure{ background:var(--color-error); }

/* Neutraliza pseudo-spinners globais */
.btn--loading::after,
.btn--loading::before{ content:none !important; }
.btn--loading{ background-image:none !important; }
